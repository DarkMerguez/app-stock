<mat-card class="example-card" appearance="outlined" routerLink="/product-details/{{product.id}}">
  <mat-card-header>
    @if((isAdmin) || ((user.EnterpriseId === product.EnterpriseId))) {
    <ng-container>
      <div class="icon-container">
        <button mat-icon-button [routerLink]="['/update-product', product.id]" aria-label="Modifier">
          <mat-icon>edit</mat-icon>
        </button>
        <button mat-icon-button (click)="onDelete(product.id)" aria-label="Supprimer">
          <mat-icon>delete</mat-icon>
        </button>
      </div>
    </ng-container>
    } @else {
      <ng-container>
        <div class="icon-container">
          @if(!isLoggedIn) { 
            <input type="number" min="1" max="{{product.stock}}" placeholder="Quantity" />
            <button routerLink="/signin">Add to cart</button> 
          }
          @else { 
            <input type="number" [(ngModel)]="quantity" min="1" placeholder="Quantity" />
            <button (click)="addToCart()" >Add to cart</button> 
            <div *ngIf="confirmationMessage" class="alert alert-success">
              {{ confirmationMessage }}
            </div>
          }
        </div>
      </ng-container>
    }

    <mat-card-title-group>
      <mat-card-title>{{ product.name }}</mat-card-title>
      <mat-card-subtitle>{{ product.price }} â‚¬</mat-card-subtitle>
      <mat-card-subtitle>Stock : {{ product.stock }}</mat-card-subtitle>
      <mat-card-subtitle>Vendeur : {{ enterprise.name }}</mat-card-subtitle>
    </mat-card-title-group>
  </mat-card-header>

  <!-- Carousel d'images -->
  <div class="carousel-container">
    <div class="carousel" [style.transform]="'translateX(-' + (currentIndex * 100) + '%)'">
      <div *ngFor="let image of productImages; let i = index" class="carousel-item">
        <img [src]="image.url" alt="Product image" class="carousel-image" />
      </div>
    </div>
    <button class="carousel-button left" (click)="prevSlide()">&#10094;</button>
    <button class="carousel-button right" (click)="nextSlide()">&#10095;</button>
  </div>

  <mat-card-content>
    <h3>Description du produit :</h3>
    <p>{{ product.description }}</p>
  </mat-card-content>
</mat-card>